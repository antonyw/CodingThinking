# Spring 事务机制剖析
作为Java开发者，不免要接触到两种事务管理机制——全局事务和本地事务。

如果你不熟悉什么是全局事务或本地事务，让我们先看几个概念：
1. Resource Manager 简称RM，它负责存储并管理系统数据资源的状态，比如数据库服务器、JMS消息服务器都是RM。
2. Transaction Processing Monitor 简称TPM或TP monitor，它的职责是在分布式事务中协调包含多个RM的事务处理。TPM通常对应特定的中间件。
3. Transaction Manager 简称TM，它可以认为是TPM中的核心模块，直接负责多RM之间事务处理的协调工作，并且提供事务界定、事务上下文传播。
4. Application 以独立行使存在的或运行于容器中的应用程序，可以认为是事务边界的触发点。

理解了上面几个概念之后，其实全局事务和本地事务的区别就是在整个事务的过程中涉及到的RM数量多少。

### 全局事务
如果真个事务过程中涉及多个RM参与，那么就需要引入TPM来协调多个RM之间的事务处理。TPM通过一定的机制保证整个事务在多个RM之间的ACID属性。其实也就是我们常说的“分布式事务”。

### 局部事务
如果事务只涉及到一个RM参与，那么这就是局部事务，它并不需要TPM的介入。例如我们在订单生成后写一张表，或向一个消息队列发送一条消息。

